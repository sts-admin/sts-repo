var Layout=function(){var e="layouts/layout3/img/",t="layouts/layout3/css/",o=App.getResponsiveBreakpoint("md"),n=function(){jQuery(".page-header").on("click",".search-form",function(e){jQuery(this).addClass("open"),jQuery(this).find(".form-control").focus(),jQuery(".page-header .search-form .form-control").on("blur",function(e){jQuery(this).closest(".search-form").removeClass("open"),jQuery(this).unbind("blur")})}),jQuery(".page-header").on("keypress",".hor-menu .search-form .form-control",function(e){if(13==e.which)return jQuery(this).closest(".search-form").submit(),!1}),jQuery(".page-header").on("mousedown",".search-form.open .submit",function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).closest(".search-form").submit()}),jQuery("body").on("click",".page-header-top-fixed .page-header-top .menu-toggler",function(){App.scrollTop()})},i=function(){jQuery(".page-header .menu-toggler").on("click",function(e){if(App.getViewPort().width<o){var t=jQuery(".page-header .page-header-menu");t.is(":visible")?t.slideUp(300):t.slideDown(300),jQuery("body").hasClass("page-header-top-fixed")&&App.scrollTop()}}),jQuery(".hor-menu .menu-dropdown > a, .hor-menu .dropdown-submenu > a").on("click",function(e){App.getViewPort().width<o&&jQuery(this).next().hasClass("dropdown-menu")&&(e.stopPropagation(),jQuery(this).parent().hasClass("opened")?jQuery(this).parent().removeClass("opened"):jQuery(this).parent().addClass("opened"))}),jQuery(".hor-menu li > a").on("click",function(e){App.getViewPort().width<o&&(jQuery(this).parent("li").hasClass("classic-menu-dropdown")||jQuery(this).parent("li").hasClass("mega-menu-dropdown")||jQuery(this).parent("li").hasClass("dropdown-submenu")||(jQuery(".page-header .page-header-menu").slideUp(300),App.scrollTop()))}),jQuery(document).on("click",".mega-menu-dropdown .dropdown-menu, .classic-menu-dropdown .dropdown-menu",function(e){e.stopPropagation()}),jQuery(window).scroll(function(){var e=75;jQuery("body").hasClass("page-header-menu-fixed")&&(jQuery(window).scrollTop()>e?jQuery(".page-header-menu").addClass("fixed"):jQuery(".page-header-menu").removeClass("fixed")),jQuery("body").hasClass("page-header-top-fixed")&&(jQuery(window).scrollTop()>e?jQuery(".page-header-top").addClass("fixed"):jQuery(".page-header-top").removeClass("fixed"))})},a=function(e,t,o){var n=encodeURI(location.hash).toLowerCase(),i=jQuery(".hor-menu");"click"===e||"set"===e?t=jQuery(t):"match"===e&&i.find("li > a").each(function(){var e=jQuery(this).attr("ui-sref");if(o&&e){if(o.is(e))return void(t=jQuery(this))}else{var i=jQuery(this).attr("href");if(i&&(i=i.toLowerCase(),i.length>1&&n.substr(1,i.length-1)==i.substr(1)))return void(t=jQuery(this))}}),t&&0!=t.size()&&"javascript:;"!=t.attr("href")&&"javascript:;"!=t.attr("ui-sref")&&"#"!=t.attr("href")&&"#"!=t.attr("ui-sref")&&(i.find("li.active").removeClass("active"),i.find("li > a > .selected").remove(),i.find("li.open").removeClass("open"),t.parents("li").each(function(){jQuery(this).addClass("active"),1===jQuery(this).parent("ul.navbar-nav").size()&&jQuery(this).find("> a").append('<span class="selected"></span>')}))},s=function(){var e=App.getViewPort().width;jQuery(".page-header-menu");e>=o?jQuery(".page-header-menu").css("display","block"):e<o&&jQuery(".page-header-menu").css("display","none")},r=function(){jQuery("body").height()<App.getViewPort().height&&(height=App.getViewPort().height-jQuery(".page-header").outerHeight()-(jQuery(".page-container").outerHeight()-jQuery(".page-content").outerHeight())-jQuery(".page-prefooter").outerHeight()-jQuery(".page-footer").outerHeight(),jQuery(".page-content").css("min-height",height))},p=function(){var e=100,t=500;navigator.userAgent.match(/iPhone|iPad|iPod/i)?jQuery(window).bind("touchend touchcancel touchleave",function(o){jQuery(this).scrollTop()>e?jQuery(".scroll-to-top").fadeIn(t):jQuery(".scroll-to-top").fadeOut(t)}):jQuery(window).scroll(function(){jQuery(this).scrollTop()>e?jQuery(".scroll-to-top").fadeIn(t):jQuery(".scroll-to-top").fadeOut(t)}),jQuery(".scroll-to-top").click(function(e){return e.preventDefault(),jQuery("html, body").animate({scrollTop:0},t),!1})};return{initHeader:function(e){n(),i(),App.addResizeHandler(s),App.isAngularJsApp()&&a("match",null,e)},initContent:function(){r()},initFooter:function(){p()},init:function(){this.initHeader(),this.initContent(),this.initFooter()},setMainMenuActiveLink:function(e,t){a(e,t)},setAngularJsMainMenuActiveLink:function(e,t,o){a(e,t,o)},closeMainMenu:function(){jQuery(".hor-menu").find("li.open").removeClass("open"),App.getViewPort().width<o&&jQuery(".page-header-menu").is(":visible")&&jQuery(".page-header .menu-toggler").click()},getLayoutImgPath:function(){return App.getAssetsPath()+e},getLayoutCssPath:function(){return App.getAssetsPath()+t}}}();App.isAngularJsApp()===!1&&jQuery(document).ready(function(){Layout.init()});